!function(o){function t(o,i,e,n){o.paintPixel(i,e,!1),i-1>=0&&o.colorAt(i-1,e)===n&&t(o,i-1,e,n),i+1<o.columns&&o.colorAt(i+1,e)===n&&t(o,i+1,e,n),e-1>=0&&o.colorAt(i,e-1)===n&&t(o,i,e-1,n),e+1<o.rows&&o.colorAt(i,e+1)===n&&t(o,i,e+1,n)}var i=o.flood={},e=i.fill={},n=e.Flooder=function(o){this.model=o};n.prototype.flood=function(o,i){t(this.model,o,i,this.model.colorAt(o,i)),this.model.refresh()};var l=function(o,t,i){this.flooder=new n(o),this.model=o,this.view=t,this.canvas=i,this.boundReceiveFloodEvent=this.receiveFloodEvent.bind(this)};l.prototype.startDrawing=function(o){this.boundReceiveFloodEvent(o)},l.prototype.stopDrawing=function(){},l.prototype.receiveFloodEvent=function(o){var t=o.clientX-this.view.horizontalOffset-this.canvas.offsetLeft,i=o.clientY-this.view.verticalOffset-this.canvas.offsetTop,e=Math.floor(t/this.view.pixelSize),n=Math.floor(i/this.view.pixelSize);this.flooder.flood(e,n)},e.controllerFor=function(o,t,i){return new l(o,t,i)}}(window.sprite=window.sprite||{});